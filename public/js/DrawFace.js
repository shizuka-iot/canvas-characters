"use strict";const LEFT=-1,RIGHT=1;let px,py,ox,oy;class DrawFace{constructor(t,i){this.initCanvas(t,640,640),window.addEventListener("mousemove",this.mouseMove,!1),this.coordinates=i,this.initAllCoordinates()}initCanvas(t,i,e){this.can=document.getElementById(t),this.con=this.can.getContext("2d"),this.can.width=i,this.can.height=e}lineTo(t){this.con.lineTo(t.x,t.y)}moveTo(t){this.con.moveTo(t.x,t.y)}_initBackHairArrays(){this.back_hair_roots=[],this.back_hair_tips=[],this.back_hair_cp1=[],this.back_hair_cp2=[]}_initOutsideHairArrays(){this.outside_hair_roots=[],this.outside_hair_tips=[],this.outside_hair_cp1=[],this.outside_hair_cp2=[]}_initOutsideBackHairArrays(){this.outside_back_hair_roots=[],this.outside_back_hair_tips=[],this.outside_back_hair_cp1=[],this.outside_back_hair_cp2=[]}initAllCoordinates(){this.pn=0,this.center={x:this.can.width/2,y:this.can.height/2+40},this.top_of_head={x:this.center.x,y:this.center.y-240},this.skin_color="rgb("+this.coordinates.skin.color.r+", "+this.coordinates.skin.color.g+", "+this.coordinates.skin.color.b+")",this.pupil_color="rgb("+this.coordinates.eye.pupil.color.r+", "+this.coordinates.eye.pupil.color.g+", "+this.coordinates.eye.pupil.color.b+")",this.iris_color="rgb("+this.coordinates.eye.iris.color.r+", "+this.coordinates.eye.iris.color.g+", "+this.coordinates.eye.iris.color.b+")",this.hair_color="rgb("+this.coordinates.hair.color.r+", "+this.coordinates.hair.color.g+", "+this.coordinates.hair.color.b+")",this.coordinates.hair.color.r<50&&this.coordinates.hair.color.g<50&&this.coordinates.hair.color.b<50?this.hair_stroke_color="#ddd":this.hair_stroke_color="#000",this.eye_head=[{x:this.center.x+35+this.coordinates.eye.eye_head.width,y:this.center.y+this.coordinates.eye.eye_head.height},{x:this.center.x-35-this.coordinates.eye.eye_head.width,y:this.center.y+this.coordinates.eye.eye_head.height}],this.upper_eyeline_end=[{x:this.eye_head[0].x+100+this.coordinates.eye.upper_eyeline_end.x,y:this.center.y+this.coordinates.eye.upper_eyeline_end.y},{x:this.eye_head[1].x-100-this.coordinates.eye.upper_eyeline_end.x,y:this.center.y+this.coordinates.eye.upper_eyeline_end.y}],this.upper_eyeline_cp1=[{x:this.eye_head[0].x+this.sp(this.eye_head[0].x,this.upper_eyeline_end[0].x,1/3)+this.coordinates.eye.upper_eyeline_cp1.x,y:this.center.y-30+this.coordinates.eye.upper_eyeline_cp1.y+this.coordinates.eye.upper_eyeline_cp.y},{x:this.eye_head[1].x-this.sp(this.eye_head[1].x,this.upper_eyeline_end[1].x,1/3)-this.coordinates.eye.upper_eyeline_cp1.x,y:this.center.y-30+this.coordinates.eye.upper_eyeline_cp1.y+this.coordinates.eye.upper_eyeline_cp.y}],this.upper_eyeline_cp2=[{x:this.eye_head[0].x+this.sp(this.eye_head[0].x,this.upper_eyeline_end[0].x,2/3)+this.coordinates.eye.upper_eyeline_cp2.x,y:this.center.y-30+this.coordinates.eye.upper_eyeline_cp2.y+this.coordinates.eye.upper_eyeline_cp.y},{x:this.eye_head[1].x-this.sp(this.eye_head[1].x,this.upper_eyeline_end[1].x,2/3)-this.coordinates.eye.upper_eyeline_cp2.x,y:this.center.y-30+this.coordinates.eye.upper_eyeline_cp2.y+this.coordinates.eye.upper_eyeline_cp.y}],this.lower_eyeline_cp1=[{x:this.eye_head[0].x+this.sp(this.eye_head[0].x,this.upper_eyeline_end[0].x,1/3)+this.coordinates.eye.lower_eyeline_cp1.x,y:this.center.y-30-this.coordinates.eye.lower_eyeline_cp1.y},{x:this.eye_head[1].x-this.sp(this.eye_head[1].x,this.upper_eyeline_end[1].x,1/3)-this.coordinates.eye.lower_eyeline_cp1.x,y:this.center.y-30-this.coordinates.eye.lower_eyeline_cp1.y}],this.lower_eyeline_cp2=[{x:this.upper_eyeline_end[0].x+10+this.coordinates.eye.lower_eyeline_cp2.x,y:this.center.y-25-this.coordinates.eye.lower_eyeline_cp2.y},{x:this.upper_eyeline_end[1].x-10-this.coordinates.eye.lower_eyeline_cp2.x,y:this.center.y-25-this.coordinates.eye.lower_eyeline_cp2.y}],this.upper_eyeline_start=[{x:this.eye_head[0].x,y:this.eye_head[0].y},{x:this.eye_head[1].x,y:this.eye_head[1].y}],this.eye_end=[{x:this.upper_eyeline_end[0].x-20+this.coordinates.eye.eye_end.x,y:this.center.y+20+this.coordinates.eye.eye_end.y},{x:this.upper_eyeline_end[1].x+20-this.coordinates.eye.eye_end.x,y:this.center.y+20+this.coordinates.eye.eye_end.y}],this.upper_eyeline_start2=[{x:this.eye_head[0].x,y:this.eye_head[0].y-10},{x:this.eye_head[1].x,y:this.eye_head[1].y-10}],this.upper_eyeline_end2=[{x:this.upper_eyeline_end[0].x,y:this.center.y+this.coordinates.eye.upper_eyeline_end.y},{x:this.upper_eyeline_end[1].x,y:this.center.y+this.coordinates.eye.upper_eyeline_end.y}],this.eyeline2_cp1=[{x:this.upper_eyeline_cp1[0].x+this.coordinates.eyeline_double.both_cp1.x,y:this.upper_eyeline_cp1[0].y-5-this.coordinates.eyeline_double.both_cp1.y},{x:this.upper_eyeline_cp1[1].x-this.coordinates.eyeline_double.both_cp1.x,y:this.upper_eyeline_cp1[1].y-5-this.coordinates.eyeline_double.both_cp1.y}],this.eyeline2_cp2=[{x:this.upper_eyeline_cp2[0].x+this.coordinates.eyeline_double.both_cp2.x,y:this.upper_eyeline_cp2[0].y-5-this.coordinates.eyeline_double.both_cp2.y},{x:this.upper_eyeline_cp2[1].x-this.coordinates.eyeline_double.both_cp2.x,y:this.upper_eyeline_cp2[1].y-5-this.coordinates.eyeline_double.both_cp2.y}],this.eyeline2_cp3=[{x:this.upper_eyeline_cp1[0].x+this.coordinates.eyeline_double.both_cp1.x,y:this.eyeline2_cp1[0].y-2},{x:this.upper_eyeline_cp1[1].x-this.coordinates.eyeline_double.both_cp1.x,y:this.eyeline2_cp1[1].y-2}],this.eyeline2_cp4=[{x:this.upper_eyeline_cp2[0].x+this.coordinates.eyeline_double.both_cp2.x,y:this.eyeline2_cp2[0].y-2},{x:this.upper_eyeline_cp2[1].x-this.coordinates.eyeline_double.both_cp2.x,y:this.eyeline2_cp2[1].y-2}],this.eyelash_start=[{x:this.eye_end[0].x,y:this.eye_end[0].y},{x:this.eye_end[1].x,y:this.eye_end[1].y}],this.eyelash_end=[{x:this.upper_eyeline_end[0].x+10,y:this.upper_eyeline_end[0].y},{x:this.upper_eyeline_end[1].x-10,y:this.upper_eyeline_end[1].y}],this.eyelash_cp1=[{x:this.eyelash_start[0].x+this.sp(this.eyelash_start[0].x,this.eyelash_end[0].x,.5),y:this.eyelash_end[0].y+this.sp(this.eyelash_start[0].y,this.eyelash_end[0].y,.5)-5},{x:this.eyelash_start[1].x-this.sp(this.eyelash_start[1].x,this.eyelash_end[1].x,.5),y:this.eyelash_end[1].y+this.sp(this.eyelash_start[1].y,this.eyelash_end[1].y,.5)-5}],this.eyelash_cp2=[{x:this.eyelash_start[0].x+this.sp(this.eyelash_start[0].x,this.eyelash_end[0].x,.5),y:this.eyelash_end[0].y+this.sp(this.eyelash_start[0].y,this.eyelash_end[0].y,.5)-5},{x:this.eyelash_start[1].x-this.sp(this.eyelash_start[1].x,this.eyelash_end[1].x,.5),y:this.eyelash_end[1].y+this.sp(this.eyelash_start[1].y,this.eyelash_end[1].y,.5)-5}],this.eyelash_cp=[{x:this.upper_eyeline_end[0].x-10,y:this.eyelash_end[0].y},{x:this.upper_eyeline_end[1].x+10,y:this.eyelash_end[1].y}],this.eyelid_cp1=[{x:this.upper_eyeline_start[0].x,y:this.upper_eyeline_start[0].y-60},{x:this.upper_eyeline_start[1].x,y:this.upper_eyeline_start[1].y-60}],this.eyelid_cp2=[{x:this.upper_eyeline_end[0].x,y:this.upper_eyeline_end[0].y-60},{x:this.upper_eyeline_end[1].x,y:this.upper_eyeline_end[1].y-60}],this.lower_eyelid_start=[{x:this.eye_head[0].x+10,y:this.eye_end[0].y},{x:this.eye_head[1].x-10,y:this.eye_end[1].y}],this.lower_eyelid_cp1=[{x:this.lower_eyelid_start[0].x+this.sp(this.lower_eyelid_start[0].x,this.eye_end[0].x,1/3),y:this.eye_end[0].y+30},{x:this.lower_eyelid_start[1].x-this.sp(this.lower_eyelid_start[1].x,this.eye_end[1].x,1/3),y:this.eye_end[1].y+30}],this.lower_eyelid_cp2=[{x:this.lower_eyelid_start[0].x+this.sp(this.lower_eyelid_start[0].x,this.eye_end[0].x,2/3),y:this.eye_end[0].y+30},{x:this.lower_eyelid_start[1].x-this.sp(this.lower_eyelid_start[1].x,this.eye_end[1].x,2/3),y:this.eye_end[1].y+30}],this.lower_eyelid_cp3=[{x:this.eye_head[0].x,y:this.eye_head[0].y+80},{x:this.eye_head[1].x,y:this.eye_head[1].y+80}],this.lower_eyelid_cp4=[{x:this.eye_end[0].x,y:this.eye_end[0].y+60},{x:this.eye_end[1].x,y:this.eye_end[1].y+60}],this.nose_top={x:this.center.x,y:this.center.y+90+this.coordinates.nose.position.y},this.nose_bottom={x:this.center.x+this.coordinates.nose.bottom.x,y:this.nose_top.y+12+this.coordinates.nose.bottom.y},this.nose_cp1={x:this.nose_top.x+5+this.coordinates.nose.cp1.x,y:this.nose_top.y+this.coordinates.nose.cp1.y+this.sp(this.nose_top.y,this.nose_bottom.y,.5)},this.nose_cp2={x:this.nose_top.x+this.coordinates.nose.cp2.x,y:this.nose_top.y+this.sp(this.nose_top.y,this.nose_bottom.y,2/3)+this.coordinates.nose.cp2.y},this.nose2_start=[{x:this.nose_bottom.x+this.coordinates.nose2.start.x+4,y:this.nose_bottom.y+this.coordinates.nose2.start.y},{x:this.nose_bottom.x-this.coordinates.nose2.start.x-4,y:this.nose_bottom.y+this.coordinates.nose2.start.y}],this.nose2_end=[{x:this.nose2_start[0].x+4,y:this.nose2_start[0].y-5},{x:this.nose2_start[1].x-4,y:this.nose2_start[1].y-5}],this.nose2_cp=[{x:this.nose2_start[0].x,y:this.nose2_end[0].y},{x:this.nose2_start[1].x,y:this.nose2_end[1].y}],this.eyelid_bottom=[{x:this.eye_head[0].x+40,y:this.center.y+28+5+this.coordinates.eyelid.lower.y},{x:this.eye_head[1].x-40,y:this.center.y+28+5+this.coordinates.eyelid.lower.y}],this.eyelid_bottom_cp1=[{x:this.eye_head[0].x,y:this.eyelid_bottom[0].y},{x:this.eye_head[1].x,y:this.eyelid_bottom[1].y}],this.eyelid_bottom_cp3=[{x:this.eye_end[0].x-this.sp(this.eye_end[0].x,this.eyelid_bottom[0].x,.5),y:this.eyelid_bottom[0].y},{x:this.eye_end[1].x+this.sp(this.eyelid_bottom[1].x,this.eye_end[1].x,.5),y:this.eyelid_bottom[1].y}],this.eyelid_bottom_cp4=[{x:this.eye_head[0].x,y:this.eyelid_bottom[0].y},{x:this.eye_head[1].x,y:this.eyelid_bottom[1].y}],this.mouth_start={x:this.center.x-this.coordinates.mouth.width,y:this.center.y+130+this.coordinates.mouth.height},this.mouth_end={x:this.center.x+this.coordinates.mouth.width,y:this.center.y+130+this.coordinates.mouth.height},this.mouth_cp1={x:this.mouth_start.x+this.sp(this.mouth_start.x,this.mouth_end.x,1/3),y:this.mouth_start.y+this.coordinates.mouth.cp.y},this.mouth_cp2={x:this.mouth_start.x+this.sp(this.mouth_start.x,this.mouth_end.x,2/3),y:this.mouth_start.y+this.coordinates.mouth.cp.y},this.chin_start={x:this.center.x-30-this.coordinates.chin.width,y:this.mouth_start.y+50+this.coordinates.chin.height+this.coordinates.mouth.cp.y/2},this.chin_end={x:this.center.x+30+this.coordinates.chin.width,y:this.mouth_start.y+50+this.coordinates.chin.height+this.coordinates.mouth.cp.y/2},this.chin_cp1={x:this.chin_start.x+this.sp(this.chin_start.x,this.chin_end.x,1/3),y:this.chin_start.y+10},this.chin_cp2={x:this.chin_start.x+this.sp(this.chin_start.x,this.chin_end.x,2/3),y:this.chin_start.y+10},this.nape={x:this.center.x,y:this.chin_start.y},this.twin_terminal_right={x:this.top_of_head.x+140+this.coordinates.hair.twin_tail.terminal.x,y:this.top_of_head.y+this.sp(this.top_of_head.y,this.nape.y,.5)+this.coordinates.hair.twin_tail.terminal.y},this.twin_terminal_left={x:this.top_of_head.x-140-this.coordinates.hair.twin_tail.terminal.x,y:this.top_of_head.y+this.sp(this.top_of_head.y,this.nape.y,.5)+this.coordinates.hair.twin_tail.terminal.y},this.cheek_start=[{x:this.chin_end.x+this.coordinates.chin.width+this.coordinates.cheek.width,y:this.chin_end.y},{x:this.chin_start.x-this.coordinates.chin.width-this.coordinates.cheek.width,y:this.chin_start.y}],this.cheek_end=[{x:this.upper_eyeline_end[0].x+20+this.coordinates.eye.span_to_eye_x,y:this.upper_eyeline_end[0].y},{x:this.upper_eyeline_end[1].x-20-this.coordinates.eye.span_to_eye_x,y:this.upper_eyeline_end[1].y}],this.temple_left={x:this.cheek_end[1].x,y:this.cheek_end[1].y},this.temple_right={x:this.cheek_end[0].x,y:this.cheek_end[0].y},this.cheek_cp1=[{x:this.cheek_start[0].x+this.sp(this.cheek_start[0].x,this.cheek_end[0].x,1/3)+this.coordinates.cheek.cp1.x,y:this.cheek_start[0].y-this.sp(this.cheek_start[0].y,this.cheek_end[0].y,1/8)+this.coordinates.cheek.cp1.y},{x:this.cheek_start[1].x-this.sp(this.cheek_start[1].x,this.cheek_end[1].x,1/3)-this.coordinates.cheek.cp1.x,y:this.cheek_start[1].y-this.sp(this.cheek_start[1].y,this.cheek_end[1].y,1/8)+this.coordinates.cheek.cp1.y}],this.cheek_cp2=[{x:this.cheek_start[0].x+this.sp(this.cheek_start[0].x,this.cheek_end[0].x,.8)+this.coordinates.cheek.cp2.x,y:this.cheek_start[0].y-this.sp(this.cheek_start[0].y,this.cheek_end[0].y,.25)+this.coordinates.cheek.cp2.y},{x:this.cheek_start[1].x-this.sp(this.cheek_start[1].x,this.cheek_end[1].x,.8)-this.coordinates.cheek.cp2.x,y:this.cheek_start[1].y-this.sp(this.cheek_start[1].y,this.cheek_end[1].y,.25)+this.coordinates.cheek.cp2.y}],this.head_cp1={x:this.cheek_end[0].x+60,y:this.center.y-320},this.head_cp2={x:this.cheek_end[1].x-60,y:this.center.y-320},this.ear_start=[{x:this.temple_right.x-20,y:this.temple_right.y-20},{x:this.temple_left.x+20,y:this.temple_left.y-20}],this.ear_end=[{x:this.eye_end[0].x,y:this.eye_end[0].y+50},{x:this.eye_end[1].x,y:this.eye_end[1].y+50}],this.earlobe_start=[{x:this.ear_start[0].x+30,y:this.ear_start[0].y+this.sp(this.ear_start[0].y,this.ear_end[0].y,2/3)},{x:this.ear_start[1].x-30,y:this.ear_start[1].y+this.sp(this.ear_start[1].y,this.ear_end[1].y,2/3)}],this.inner_ear_start=[{x:this.ear_start[0].x-10,y:this.ear_start[0].y+10},{x:this.ear_start[1].x+10,y:this.ear_start[1].y+10}],this.inner_ear_end=[{x:this.earlobe_start[0].x-10,y:this.earlobe_start[0].y-10},{x:this.earlobe_start[1].x+10,y:this.earlobe_start[1].y-10}],this.ear_cp1=[{x:this.earlobe_start[0].x+this.sp(this.ear_start[0].x,this.earlobe_start[0].x,1/3),y:this.ear_start[0].y-20},{x:this.earlobe_start[1].x-this.sp(this.ear_start[1].x,this.earlobe_start[1].x,1/3),y:this.ear_start[1].y-20}],this.ear_cp2=[{x:this.earlobe_start[0].x+this.sp(this.ear_start[0].x,this.earlobe_start[0].x,.75),y:this.ear_start[0].y+this.sp(this.ear_start[0].y,this.earlobe_start[0].y,.5)},{x:this.earlobe_start[1].x-this.sp(this.ear_start[1].x,this.earlobe_start[1].x,.75),y:this.ear_start[1].y+this.sp(this.ear_start[1].y,this.earlobe_start[1].y,.5)}],this.inner_ear_cp1=[{x:this.inner_ear_end[0].x+this.sp(this.inner_ear_start[0].x,this.inner_ear_end[0].x,1/3),y:this.inner_ear_start[0].y-20},{x:this.inner_ear_end[1].x-this.sp(this.inner_ear_start[1].x,this.inner_ear_end[1].x,1/3),y:this.inner_ear_start[1].y-20}],this.inner_ear_cp2=[{x:this.inner_ear_end[0].x+this.sp(this.inner_ear_start[0].x,this.inner_ear_end[0].x,1),y:this.inner_ear_start[0].y+this.sp(this.inner_ear_start[0].y,this.inner_ear_end[0].y,.5)},{x:this.inner_ear_end[1].x-this.sp(this.inner_ear_start[1].x,this.inner_ear_end[1].x,1),y:this.inner_ear_start[1].y+this.sp(this.inner_ear_start[1].y,this.inner_ear_end[1].y,.5)}],this.earlobe_cp1=[{x:this.earlobe_start[0].x-10,y:this.ear_end[0].y},{x:this.earlobe_start[1].x+10,y:this.ear_end[1].y}],this.earlobe_cp2=[],this.neck_start=[{x:this.center.x+70,y:this.chin_start.y-60},{x:this.center.x-70,y:this.chin_start.y-60}],this.neck_end=[{x:this.neck_start[0].x+150,y:this.neck_start[0].y+180},{x:this.neck_start[1].x-150,y:this.neck_start[1].y+180}],this.neck_start2=[{x:this.neck_start[0].x,y:this.neck_start[0].y+60},{x:this.neck_start[1].x,y:this.neck_start[1].y+60}],this.neck_end2=[{x:this.neck_end[0].x,y:this.neck_end[0].y+50},{x:this.neck_end[1].x,y:this.neck_end[1].y+50}],this.neck_terminal1=[{x:this.neck_start[0].x,y:this.neck_start[0].y-150},{x:this.neck_start[1].x,y:this.neck_start[1].y-150}],this.neck_terminal2=[{x:this.neck_end[0].x,y:this.neck_terminal1[0].y},{x:this.neck_end[1].x,y:this.neck_terminal1[1].y}],this.neck_cp1=[{x:this.neck_start[0].x-5,y:this.neck_start[0].y+130},{x:this.neck_start[1].x+5,y:this.neck_start[1].y+130}],this.neck_cp2=[{x:this.neck_start[0].x-30,y:this.neck_start[0].y+160},{x:this.neck_start[1].x+30,y:this.neck_start[1].y+160}],this.neck_shadow_cp1={x:this.neck_start[1].x+this.sp(this.neck_start[1].x,this.neck_end[1].x,2/3),y:this.neck_start2[1].y+50},this.neck_shadow_cp2={x:this.neck_start[1].x+this.sp(this.neck_start[1].x,this.neck_end[1].x,1/3),y:this.neck_start2[1].y+50},this.upper_lip_cp1={x:this.mouth_start.x-this.coordinates.lip.upper.cp.width+this.sp(this.mouth_start.x,this.mouth_end.x,1/3),y:this.mouth_start.y+10-this.coordinates.lip.upper.cp.height},this.upper_lip_cp2={x:this.mouth_start.x+this.coordinates.lip.upper.cp.width+this.sp(this.mouth_start.x,this.mouth_end.x,2/3),y:this.mouth_start.y+10-this.coordinates.lip.upper.cp.height},this.lower_lip_cp1={x:this.mouth_start.x-this.coordinates.lip.lower.cp.width+this.sp(this.mouth_start.x,this.mouth_end.x,1/3),y:this.mouth_start.y+10+this.coordinates.mouth.cp.y+this.coordinates.lip.lower.cp.height},this.lower_lip_cp2={x:this.mouth_start.x+this.coordinates.lip.lower.cp.width+this.sp(this.mouth_start.x,this.mouth_end.x,2/3),y:this.mouth_start.y+10+this.coordinates.mouth.cp.y+this.coordinates.lip.lower.cp.height},this.forehead_right={x:this.cheek_end[0].x-this.sp(this.cheek_end[0].y,this.cheek_start[0].y,1/6),y:this.cheek_end[0].y-140},this.forehead_left={x:this.cheek_end[1].x+this.sp(this.cheek_end[1].y,this.cheek_start[1].y,1/6),y:this.cheek_end[1].y-140},this.eyeblow_start=[{x:this.eye_head[0].x-10+this.coordinates.eyeblow.head.x,y:this.eye_head[0].y-40+this.coordinates.eyeblow.head.y},{x:this.eye_head[1].x+10-this.coordinates.eyeblow.head.x,y:this.eye_head[1].y-40+this.coordinates.eyeblow.head.y}],this.eyeblow_end=[{x:this.upper_eyeline_end[0].x+5+this.coordinates.eyeblow.end.x,y:this.upper_eyeline_end[0].y-50+this.coordinates.eyeblow.end.y},{x:this.upper_eyeline_end[1].x-5-this.coordinates.eyeblow.end.x,y:this.upper_eyeline_end[1].y-50+this.coordinates.eyeblow.end.y}],this.eyeblow_upper_cp1=[{x:this.eyeblow_start[0].x+this.sp(this.eyeblow_end[0].x,this.eyeblow_start[0].x,1/3),y:this.eyeblow_start[0].y-10},{x:this.eyeblow_start[1].x-this.sp(this.eyeblow_end[1].x,this.eyeblow_start[1].x,1/3),y:this.eyeblow_start[1].y-10}],this.eyeblow_upper_cp2=[{x:this.eyeblow_start[0].x+this.sp(this.eyeblow_end[0].x,this.eyeblow_start[0].x,2/3),y:this.eyeblow_start[0].y-20},{x:this.eyeblow_start[1].x-this.sp(this.eyeblow_end[1].x,this.eyeblow_start[1].x,2/3),y:this.eyeblow_start[1].y-20}],this.eyeblow_lower_cp1=[{x:this.eyeblow_start[0].x+this.sp(this.eyeblow_end[0].x,this.eyeblow_start[0].x,1/3),y:this.eyeblow_start[0].y+this.coordinates.eyeblow.cp.y},{x:this.eyeblow_start[1].x-this.sp(this.eyeblow_end[1].x,this.eyeblow_start[1].x,1/3),y:this.eyeblow_start[1].y+this.coordinates.eyeblow.cp.y}],this.eyeblow_lower_cp2=[{x:this.eyeblow_start[0].x+this.sp(this.eyeblow_end[0].x,this.eyeblow_start[0].x,2/3),y:this.eyeblow_start[0].y-20},{x:this.eyeblow_start[1].x-this.sp(this.eyeblow_end[1].x,this.eyeblow_start[1].x,2/3),y:this.eyeblow_start[1].y-20}],this.front_hair_roots=[],this.front_hair_tips=[],this.front_hair_cp1=[],this.front_hair_cp2=[],this.back_hair_roots=[],this.back_hair_tips=[],this.back_hair_cp1=[],this.back_hair_cp2=[],this.side_hair_arrays={roots:[],tips:[],cp1:[],cp2:[]},this.front_hair_arrays={roots:[],tips:[],cp1:[],cp2:[]},this.back_hair_arrays={roots:[],tips:[],cp1:[],cp2:[]},this.outside_back_hair_arrays={roots:[],tips:[],cp1:[],cp2:[]},this.outside_hair_arrays={roots:[],tips:[],cp1:[],cp2:[]},this.twin_tail_arrays={roots:[],terminals:[],tips:[],cp1:[],cp2:[],cp3:[],cp3sub:[],cp4:[],cp4sub:[]},this.side_hair_roots=[],this.side_hair_tips=[],this.side_hair_cp1=[],this.side_hair_cp2=[],this.outside_hair_roots=[],this.outside_hair_tips=[],this.outside_hair_cp1=[],this.outside_hair_cp2=[],this.outside_hair_upper_cp1={x:this.head_cp1.x-10,y:this.head_cp1.y-20},this.outside_hair_upper_cp2={x:this.head_cp2.x+10,y:this.head_cp2.y-20},this.temple=[{x:this.cheek_end[1].x,y:this.cheek_end[1].y},{x:this.cheek_end[0].x,y:this.cheek_end[0].y}],this.outside_back_hair_roots=[],this.outside_back_hair_tips=[],this.outside_back_hair_cp1=[],this.outside_back_hair_cp2=[],this.outside_back_hair_left={x:this.center.x-170,y:this.center.y},this.outside_back_hair_right={x:this.center.x+170,y:this.center.y},this.outside_back_head_cp1={x:this.head_cp1.x-10,y:this.head_cp1.y-5},this.outside_back_head_cp2={x:this.head_cp2.x+10,y:this.head_cp2.y-5},this.eye_shadow_start=[{x:this.eye_head[0].x,y:this.eye_head[0].y+10},{x:this.eye_head[1].x,y:this.eye_head[1].y+10}],this.eye_shadow_end=[{x:this.upper_eyeline_end[0].x-10,y:this.eye_head[0].y+10},{x:this.upper_eyeline_end[1].x+10,y:this.eye_head[1].y+10}],this.eye_shadow_cp1=[{x:this.upper_eyeline_cp1[0].x,y:this.upper_eyeline_cp1[0].y+10},{x:this.upper_eyeline_cp1[1].x,y:this.upper_eyeline_cp1[1].y+10}],this.eye_shadow_cp2=[{x:this.upper_eyeline_cp2[0].x,y:this.upper_eyeline_cp2[0].y+10},{x:this.upper_eyeline_cp2[1].x,y:this.upper_eyeline_cp2[1].y+10}],this.outside_hair_left={x:this.temple_left.x-this.coordinates.hair.outside.volume,y:this.temple_left.y},this.outside_hair_right={x:this.temple_right.x+this.coordinates.hair.outside.volume,y:this.temple_right.y}}mouseMove(t){px=t.pageX,py=t.pageY,ox=t.offsetX,oy=t.offsetY}static clear(t){let i=document.getElementById(t);i.getContext("2d").clearRect(0,0,i.width,i.height)}_config(t,i="#000",e=1,s=1){this.con.fillStyle=t,this.con.strokeStyle=i,this.con.globalAlpha=e,this.con.lineWidth=s}fillR(t,i="#000"){this.con.fillStyle=i,this.con.fillRect(t.x,t.y,4,4)}drawCurve(t,i,e,s=!1){s&&this.con.moveTo(t.x,t.y),this.con.quadraticCurveTo(e.x,e.y,i.x,i.y)}drawCurve2(t,i,e,s,h=!1){h&&this.con.moveTo(t.x,t.y),this.con.bezierCurveTo(e.x,e.y,s.x,s.y,i.x,i.y)}sp(t,i,e){return Math.floor(Math.abs(i-t)*e)}_initFrontHairArrays(){this.front_hair_roots=[],this.front_hair_tips=[],this.front_hair_cp1=[],this.front_hair_cp2=[]}_initHairArrays(t){t.roots=[],t.tips=[],t.cp1=[],t.cp2=[]}update(){this.initAllCoordinates()}draw(){this.con.clearRect(0,0,this.can.width,this.can.height),this.coordinates.hair.outside_back.flag&&this.drawOutsideBackHair(this.coordinates.hair.outside_back.bunch,this.coordinates.hair.outside_back.length),this.coordinates.hair.back.flag&&this._selectBackHair(),this.drawTwinTails(),this.drawNeck(),this.drawNeckShadow(),this.drawEar(),this.drawOutline(),this.drawWhiteEyes(),this.drawEyes(),this.drawEyelid(),this.drawEyeline2(),this.drawLowerEyelid(),this.drawCheekBlur(),this.drawMouth(),this.drawEyeblow(),this.drawNose(),this.drawSkinHead(),this.coordinates.hair.sideburns.flag&&this.drawSideburns(this.coordinates.hair.sideburns),this.coordinates.hair.front.flag&&this._selectFrontHair(),this.coordinates.hair.side.flag&&this._selectSideHair()}drawCheekBlur(){if(this.coordinates.cheek.blur.flag){let t=2,i=1;for(let e=0;e<2;e++)1===e&&(i=-1),this.con.save(),this.con.translate(-(this.center.x*t-this.center.x)-60*i,0),this.con.scale(t,1),this._setBlur("orange",0,0,30),this._config("pink","pink",.2,1),this.con.beginPath(),this.con.arc(this.eye_head[e].x+this.coordinates.eye.position.x*i,this.center.y+60,20,2*Math.PI,!1),this.con.fill(),this.con.restore(),this._resetBlur()}}_setBlur(t,i,e,s){this.con.shadowColor=t,this.con.shadowOffsetX=i,this.con.shadowOffsetY=e,this.con.shadowBlur=s}_resetBlur(){this.con.shadowOffsetX=0,this.con.shadowOffsetY=0,this.con.shadowBlur=0}_selectBackHair(){switch(this.coordinates.hair.back.type){case 2:this.drawBackHairStandard(this.coordinates.hair.back.bunch,this.coordinates.hair.back.length);break;case 3:this.drawBackHair(this.coordinates.hair.back.bunch,this.coordinates.hair.back.length);break;case 4:this.drawBackHair2(this.coordinates.hair.back.bunch,this.coordinates.hair.back.length)}}_selectFrontHair(){switch(this.coordinates.hair.front.type){case 2:this.drawFrontHairStandard(this.coordinates.hair.front.bunch,this.coordinates.hair.front.length);break;case 5:this.drawFrontPrincessCut(this.coordinates.hair.front.bunch,this.coordinates.hair.front.length)}}_selectSideHair(){switch(this.coordinates.hair.side.type){case 0:this.drawSideHairStandard(this.coordinates.hair.side,this.side_hair_arrays,this.temple_left,this.forehead_right)}}generateCoordinateY(t,i,e){let s=Math.abs(i.x-t.x);return e*Math.abs(i.y-t.y)/s}generateCoordinateX(t,i,e){let s=Math.abs(i.x-t.x),h=Math.abs(i.y-t.y),r=Math.floor(e/(h/s)*100)/100;return t.x>i.x?-r:r}_initializeSideHairArray(){this.side_hair_roots=[],this.side_hair_tips=[],this.side_hair_cp1=[],this.side_hair_cp2=[]}_generateSideburnsLeftCoordinates(t,i,e){this._initializeSideHairArray();for(let s=0;s<=i;s++)this.side_hair_roots[s]={x:this.temple_left.x+s*e,y:this.temple_left.y+this.generateSideburnsCoordinateLeft(s*e)},this.side_hair_tips[s]={x:this.temple_left.x+s*e+rand(-30,10),y:this.temple_left.y+rand(0,20)+t},this.side_hair_cp1[s]={x:this.temple_left.x+s*e/2+rand(-5,5),y:this.side_hair_roots[s].y+this.sp(this.side_hair_roots[s].y,this.side_hair_tips[s].y,1/3)},this.side_hair_cp2[s]={x:this.temple_left.x+s*e/2+rand(-1,1),y:this.side_hair_roots[s].y+this.sp(this.side_hair_roots[s].y,this.side_hair_tips[s].y,2/3)}}drawTwinTails(){this.coordinates.hair.twin_tail.flag&&(this._generateTwinTailCoordinates(),this.drawTwinTailFromRootsToTerminals(),this.drawTwinTailFromTerminalsToTips(),this._generateTwinTailCoordinates(LEFT),this.drawTwinTailFromRootsToTerminals(),this.drawTwinTailFromTerminalsToTips())}_generateTwinTailCoordinates(t=RIGHT){this._generateTwinTailRoots(),this._generateTwinTailTerminals(t),this._generateTwinTailTips(t),this._generateTwinTailTipCp(t)}drawTwinTailFromTerminalsToTips(){this._config(this.hair_color,this.hair_stroke_color,1,1);for(let t=0;t<=this.coordinates.hair.twin_tail.bunch;t++)t+1<=this.coordinates.hair.twin_tail.bunch&&(this.con.beginPath(),this.drawCurve2(this.twin_tail_arrays.terminals[t],this.twin_tail_arrays.tips[t],this.twin_tail_arrays.cp3sub[t],this.twin_tail_arrays.cp4sub[t],!0),this.drawCurve2(this.twin_tail_arrays.tips[t],this.twin_tail_arrays.terminals[t+1],this.twin_tail_arrays.cp4[t],this.twin_tail_arrays.cp3[t]),this.con.fill(),this.con.stroke(),this.con.closePath())}drawTwinTailFromRootsToTerminals(){this.con.beginPath(),this._config(this.hair_color,this.hair_stroke_color,1,1),this.moveTo(this.twin_tail_arrays.roots[0]);for(let t=0;t<=this.coordinates.hair.twin_tail.bunch;t++)t+1<=this.coordinates.hair.twin_tail.bunch&&(this.drawCurve2(this.twin_tail_arrays.roots[t],this.twin_tail_arrays.terminals[t],this.twin_tail_arrays.cp1[t],this.twin_tail_arrays.cp2[t]),this.lineTo(this.twin_tail_arrays.terminals[t+1]),this.drawCurve2(this.twin_tail_arrays.terminals[t+1],this.twin_tail_arrays.roots[t+1],this.twin_tail_arrays.cp2[t+1],this.twin_tail_arrays.cp1[t+1]),this.con.fill(),this.con.stroke())}_generateTwinTailTips(t=RIGHT){let i,e=this.coordinates.hair.twin_tail.tip_span;i=t===RIGHT?this.twin_terminal_right:this.twin_terminal_left;for(let s=0;s<=this.coordinates.hair.twin_tail.bunch;s++)this.twin_tail_arrays.tips[s]={x:i.x+s*e*t+40*t+rand(-10,10),y:i.y+this.coordinates.hair.twin_tail.length+100+rand(0,5)};this.twin_tail_arrays.tips.reverse()}_generateTwinTailTipCp(t=RIGHT){for(let i=0;i<=this.coordinates.hair.twin_tail.bunch;i++)this.twin_tail_arrays.cp3[i]={x:this.twin_tail_arrays.terminals[i].x+t*this.coordinates.hair.twin_tail.cp3.x+t*this.sp(this.twin_tail_arrays.terminals[i].x,this.twin_tail_arrays.tips[i].x,1),y:this.twin_tail_arrays.terminals[i].y+this.coordinates.hair.twin_tail.cp3.y},this.twin_tail_arrays.cp3sub[i]={x:this.twin_tail_arrays.cp3[i].x+t*this.coordinates.hair.twin_tail.cp3.x+t*this.coordinates.hair.twin_tail.width,y:this.twin_tail_arrays.cp3[i].y+this.coordinates.hair.twin_tail.cp3.y},this.twin_tail_arrays.cp4[i]={x:this.twin_tail_arrays.tips[i].x+t*this.coordinates.hair.twin_tail.cp4.x,y:this.twin_tail_arrays.terminals[i].y+this.coordinates.hair.twin_tail.cp4.y+this.sp(this.twin_tail_arrays.terminals[i].y,this.twin_tail_arrays.tips[i].y,.5)},this.twin_tail_arrays.cp4sub[i]={x:this.twin_tail_arrays.cp4[i].x+t*this.coordinates.hair.twin_tail.width+t*this.coordinates.hair.twin_tail.cp4.x,y:this.twin_tail_arrays.cp4[i].y+this.coordinates.hair.twin_tail.cp4.y}}_generateTwinTailTerminals(t=RIGHT){let i,e,s;t===RIGHT?(e={x:(i=this.twin_terminal_right).x+this._getTwinTerminalX(this._getTwinTerminalLean(t),-10),y:i.y-10},s={x:i.x+this._getTwinTerminalX(this._getTwinTerminalLean(t),10),y:i.y+10}):(e={x:(i=this.twin_terminal_left).x-this._getTwinTerminalX(this._getTwinTerminalLean(t),-10),y:i.y-10},s={x:i.x-this._getTwinTerminalX(this._getTwinTerminalLean(t),10),y:i.y+10});let h=40/this.coordinates.hair.twin_tail.bunch;for(let i=0;i<=this.coordinates.hair.twin_tail.bunch;i++)this.twin_tail_arrays.terminals[i]={x:e.x+t*this._getTwinTerminalX(this._getTwinTerminalLean(t),h*i),y:e.y+h*i},this.twin_tail_arrays.cp1[i]={x:this.twin_tail_arrays.roots[i].x+t*this.sp(this.twin_tail_arrays.roots[i].x,this.twin_tail_arrays.terminals[i].x,.5),y:this.twin_tail_arrays.roots[i].y},i<this.coordinates.hair.twin_tail.bunch/2?this.twin_tail_arrays.cp2[i]={x:this.twin_tail_arrays.terminals[i].x,y:this.twin_tail_arrays.roots[i].y+this.sp(this.twin_tail_arrays.roots[i].y,this.twin_tail_arrays.terminals[i].y,.5)}:this.twin_tail_arrays.cp2[i]={x:this.twin_tail_arrays.terminals[i].x,y:this.twin_tail_arrays.roots[i].y-this.sp(this.twin_tail_arrays.roots[i].y,this.twin_tail_arrays.terminals[i].y,.5)}}_getTwinTerminalLean(t=RIGHT){let i,e=this.top_of_head;i=t===RIGHT?this.twin_terminal_right:this.twin_terminal_left;let s={y:this.top_of_head.y},h=Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)),r=(180-this.getAngleFrom3coordinates(this.top_of_head,t===RIGHT?this.twin_terminal_right:this.twin_terminal_left,this.nape))/2,a=180-r-(90-this.getAngleFrom3coordinates(t===RIGHT?this.twin_terminal_right:this.twin_terminal_left,this.top_of_head,this.nape)),_=Math.sin(this.getRad(r))*h/Math.sin(this.getRad(a));return s.x=t===RIGHT?e.x+_:e.x-_,(s.y-i.y)/(s.x-i.x)*t}_getTwinTerminalY(t,i){return i*t}_getTwinTerminalX(t,i){return i/t}getAngleFrom3coordinates(t,i,e){let s=t.x-i.x,h=t.y-i.y,r=e.x-i.x,a=e.y-i.y,_=s*r+h*a,o=s*s+h*h,n=r*r+a*a;return 180*Math.acos(_/Math.sqrt(o*n))/Math.PI}getRad(t){return t*(Math.PI/180)}_generateTwinTailRoots(){let t=(this.nape.y-this.top_of_head.y)/this.coordinates.hair.twin_tail.bunch;for(let i=0;i<=this.coordinates.hair.twin_tail.bunch;i++)this.twin_tail_arrays.roots[i]={x:this.center.x,y:this.top_of_head.y+i*t}}_drawSideburnsLeft(t){this.con.beginPath(),this.con.moveTo(this.side_hair_roots[0].x,this.side_hair_roots[0].y),this._config(this.hair_color,this.hair_stroke_color);for(let i=0;i<t;i++)this.drawCurve2(this.side_hair_roots[i],this.side_hair_tips[i],this.side_hair_cp1[i],this.side_hair_cp2[i]),i+1<t?this.drawCurve2(this.side_hair_tips[i+1],this.side_hair_roots[i+1],this.side_hair_cp2[i],this.side_hair_cp1[i+1]):this.drawCurve2(this.side_hair_tips[this.side_hair_tips.length-1],this.forehead_left,this.side_hair_cp2[this.side_hair_tips.length-1],this.side_hair_cp1[this.side_hair_tips.length-1]),this.con.stroke();this.con.fill()}_drawSideburnsRight(t){this.con.beginPath(),this.con.moveTo(this.side_hair_roots[0].x,this.side_hair_roots[0].y);for(let i=0;i<t;i++)this.drawCurve2(this.side_hair_roots[i],this.side_hair_tips[i],this.side_hair_cp1[i],this.side_hair_cp2[i]),this._config(this.hair_color,"#000"),i+1<t?this.drawCurve2(this.side_hair_tips[i+1],this.side_hair_roots[i+1],this.side_hair_cp2[i],this.side_hair_cp1[i+1]):this.drawCurve2(this.side_hair_tips[this.side_hair_tips.length-1],this.cheek_end[0],this.side_hair_cp2[this.side_hair_tips.length-1],this.side_hair_cp1[this.side_hair_tips.length-1])}_generateSideburnsRightCoordinates(t,i,e){this._initializeSideHairArray();for(let s=0;s<=i;s++)this.side_hair_roots[s]={x:this.forehead_right.x+s*e,y:this.forehead_right.y+this.generateSideburnsCoordinateRight(s*e)},this.side_hair_tips[s]={x:this.forehead_right.x+s*e+rand(-30,10),y:this.cheek_end[0].y+rand(10,20)+t},this.side_hair_cp1[s]={x:this.forehead_right.x+s*e/2+rand(0,10),y:this.side_hair_roots[s].y+this.sp(this.side_hair_roots[s].y,this.side_hair_tips[s].y,1/3)},this.side_hair_cp2[s]={x:this.forehead_right.x+s*e/2+rand(-10,10),y:this.side_hair_roots[s].y+this.sp(this.side_hair_roots[s].y,this.side_hair_tips[s].y,2/3)}}_generateSideHairStandardLeftCoordinates(t,i,e){this._initializeSideHairArray();for(let s=0;s<=i;s++)this.side_hair_roots[s]={x:this.temple_left.x+s*e,y:this.temple_left.y+this.generateSideburnsCoordinateLeft(s*e)},this.side_hair_tips[s]={x:this.temple_left.x+s*e+e/2+rand(-30,0),y:this.temple_left.y+rand(0,20)+t},this.side_hair_cp1[s]={x:this.side_hair_tips[s].x+rand(-1,1),y:this.top_of_head.y},this.side_hair_cp2[s]={x:this.side_hair_tips[s].x+rand(-1,1),y:this.top_of_head.y+100}}_generateSideHairStandardRightCoordinates(t,i,e){this._initializeSideHairArray();for(let s=0;s<=i;s++)this.side_hair_roots[s]={x:this.forehead_right.x+s*e,y:this.forehead_right.y+this.generateSideburnsCoordinateRight(s*e)},this.side_hair_tips[s]={x:this.forehead_right.x+s*e+e/2+rand(-30,10),y:this.temple_right.y+rand(0,20)+t},this.side_hair_cp1[s]={x:this.side_hair_roots[s].x+rand(-10,10),y:this.top_of_head.y},this.side_hair_cp2[s]={x:this.side_hair_roots[s].x+rand(-10,10),y:this.top_of_head.y+100}}_drawSideHairStandardLeft2(t,i){this.con.beginPath(),this.con.moveTo(this.top_of_head.x,this.top_of_head.y),this._config(this.hair_color,this.hair_stroke_color);for(let e=0;e<t;e++)this.drawCurve2(this.top_of_head,i.tips[e],i.cp1[e],i.cp2[e]),e+1<t?this.drawCurve2(i.tips[e+1],this.top_of_head,i.cp2[e],i.cp1[e+1]):this.drawCurve2(i.tips[i.tips.length-1],this.top_of_head,i.cp2[i.tips.length-1],i.cp1[i.tips.length-1]),this.con.stroke();this.con.fill()}_drawSideHairStandardRight(t,i){this.con.beginPath(),this.con.moveTo(this.top_of_head.x,this.top_of_head.y),this._config(this.hair_color,this.hair_stroke_color);for(let e=0;e<t;e++)this.drawCurve2(this.top_of_head,i.tips[e],i.cp1[e],i.cp2[e]),e+1<t?this.drawCurve2(i.tips[e+1],this.top_of_head,i.cp2[e],i.cp1[e+1]):this.drawCurve2(i.tips[i.tips.length-1],this.top_of_head,i.cp2[i.tips.length-1],i.cp1[i.tips.length-1]),this.con.stroke();this.con.fill()}_generateHairCoordinates2(t,i,e,s,h,r,a,_,o){this._initHairArrays(t);let n=rand(-10,10);for(let c=0;c<=s;c++)t.roots[c]={x:i.x+c*h,y:i.y},t.tips[c]={x:i.x+r+c*a+rand(-30,0),y:this.top_of_head.y+rand(10,20)+e},c<s/2?(t.cp1[c]={x:t.roots[c].x+n-_.x,y:this.top_of_head.y+_.y},t.cp2[c]={x:t.roots[c].x+n-o.x,y:this.top_of_head.y+100+o.y}):(t.cp1[c]={x:t.roots[c].x+n+_.x,y:this.top_of_head.y+_.y},t.cp2[c]={x:t.roots[c].x+n+o.x,y:this.top_of_head.y+100+o.y})}_generateHairCoordinates(t,i,e,s,h){this._initHairArrays(t);for(let r=0;r<=s;r++)t.roots[r]={x:i.x+r*h,y:i.y},t.tips[r]={x:i.x+r*h+h/2+rand(-60,10),y:i.y+rand(10,20)+e},t.cp1[r]={x:t.roots[r].x+rand(-10,10),y:this.top_of_head.y},t.cp2[r]={x:t.roots[r].x+rand(-10,10),y:this.top_of_head.y+100}}_generateSideHairCoordinates(t,i,e,s,h,r){this._initHairArrays(t);for(let a=0;a<=s;a++)t.roots[a]={x:i.x+a*h+this.coordinates.hair.side.start.x*r,y:i.y},t.tips[a]={x:i.x+a*h+h/2+rand(-60,10)+this.coordinates.hair.side.start.x*r,y:i.y+rand(10,20)+e},t.cp1[a]={x:t.roots[a].x+this.coordinates.hair.side.cp1.x*r+rand(-10,10),y:this.top_of_head.y+this.coordinates.hair.side.cp1.y},t.cp2[a]={x:t.roots[a].x+this.coordinates.hair.side.cp2.x*r+rand(-10,10),y:this.top_of_head.y+100+this.coordinates.hair.side.cp2.y}}drawSideburns(t){let i=Math.floor(Math.abs(this.temple_left.x-this.forehead_left.x)/t.left.bunch),e=Math.floor(Math.abs(this.temple_left.x-this.forehead_left.x)/t.right.bunch);for(let s=0;s<4;s++)this._generateSideburnsLeftCoordinates(t.left.length,t.left.bunch,i),this._drawSideburnsLeft(t.left.bunch),this._generateSideburnsRightCoordinates(t.right.length,t.right.bunch,e),this._drawSideburnsRight(t.right.bunch),this.con.stroke(),this.con.fill()}drawSideHairStandard(t,i,e,s){let h=Math.floor(Math.abs(this.temple_left.x-this.forehead_left.x+this.coordinates.hair.side.left.width)/t.left.bunch),r=Math.floor(Math.abs(this.temple_left.x-this.forehead_left.x+this.coordinates.hair.side.right.width)/t.right.bunch);for(let a=0;a<1;a++)this._generateSideHairCoordinates(i,e,t.left.length,t.left.bunch,h,LEFT),this._drawSideHairStandardLeft2(t.left.bunch,i),this._generateSideHairCoordinates(i,s,t.right.length,t.right.bunch,r,RIGHT),this._drawSideHairStandardRight(t.right.bunch,i),this.con.stroke(),this.con.fill()}drawBackHairStandard(t,i){let e=Math.floor((this.temple_right.x-this.temple_left.x)/t);for(let s=0;s<=1;s++){this._generateHairCoordinates2(this.back_hair_arrays,this.temple_left,i,t,e,this.coordinates.hair.back.tips,this.coordinates.hair.back.tip_span,this.coordinates.hair.back.cp1,this.coordinates.hair.back.cp2),this._drawStandardHair(this.back_hair_arrays,t,this.hair_color)}}drawFrontHairStandard(t,i){let e=Math.floor((this.temple_right.x-this.temple_left.x)/t);for(let s=0;s<=1;s++){this._generateHairCoordinates2(this.front_hair_arrays,this.temple_left,i,t,e,this.coordinates.hair.front.tips,this.coordinates.hair.front.tip_span,this.coordinates.hair.front.cp1,this.coordinates.hair.front.cp2),this._drawStandardHair(this.front_hair_arrays,t,this.hair_color,!0)}}_drawStandardHair(t,i,e,s=!1,h=this.hair_stroke_color,r=1){s&&(this.con.save(),this.con.scale(1,1.05),this.con.beginPath(),this.con.moveTo(this.top_of_head.x,this.top_of_head.y),this._drawStandardHairSub(i,t,!0),this.con.restore(),this._config("#000","#000",.3),this.con.fill()),this._config(e,h,r),this.con.beginPath(),this.con.moveTo(this.top_of_head.x,this.top_of_head.y),this._drawStandardHairSub(i,t),this.con.globalAlpha=1}_drawStandardHairSub(t,i,e=!1){for(let s=0;s<t;s++)this.drawCurve2(this.top_of_head,i.tips[s],i.cp1[s],i.cp2[s]),s+1<t?this.drawCurve2(i.tips[s+1],this.top_of_head,i.cp2[s+1],i.cp1[s+1]):this.drawCurve2(i.tips[i.tips.length-1],this.top_of_head,i.cp2[i.tips.length-1],i.cp1[i.tips.length-1]),!1===e&&(this.con.stroke(),this.con.fill())}drawFrontPrincessCut(t,i){this._initFrontHairArrays();let e=0,s=Math.floor((this.temple_right.x-this.temple_left.x)/t);for(let h=0;h<=1;h++){for(let h=0;h<=t;h++){let r=rand(-6,6);h<t/2?e+=2:h===Math.floor(t/2)||(e-=2),0===h?(this.front_hair_roots[h]={x:this.temple_left.x+h*s,y:this.temple_right.y},this.front_hair_tips[h]={x:this.temple_left.x+h*this.coordinates.hair.front.tip_span+this.coordinates.hair.front.tips+rand(-10,10),y:this.top_of_head.y+i+e}):h===t?(this.front_hair_roots[h]={x:this.temple_right.x,y:this.temple_right.y},this.front_hair_tips[h]={x:this.temple_left.x+h*this.coordinates.hair.front.tip_span+this.coordinates.hair.front.tips+rand(-10,10),y:this.top_of_head.y+i+e}):(this.front_hair_roots[h]={x:this.temple_left.x+h*s,y:this.temple_right.y+rand(0,20)},this.front_hair_tips[h]={x:this.temple_left.x+h*this.coordinates.hair.front.tip_span+this.coordinates.hair.front.tips+rand(-10,10),y:this.top_of_head.y+i+e}),this.front_hair_cp1[h]={x:this.temple_left.x+h*s+r,y:this.top_of_head.y},this.front_hair_cp2[h]={x:this.temple_left.x+h*s+r,y:this.top_of_head.y+100}}this.con.save(),this.con.translate(3,0),this.con.scale(1,1.05),this.con.beginPath(),this.con.moveTo(this.top_of_head.x,this.top_of_head.y);for(let i=0;i<t;i++)this.drawCurve2(this.top_of_head,this.front_hair_tips[i],this.front_hair_cp1[i],this.front_hair_cp2[i]),i+1<t?(this.con.lineTo(this.front_hair_tips[i+1].x-10,this.front_hair_tips[i+1].y),this.drawCurve2(this.front_hair_tips[i+1],this.top_of_head,this.front_hair_cp2[i+1],this.front_hair_cp1[i+1])):(this.con.lineTo(this.front_hair_tips[this.front_hair_tips.length-1].x-10,this.front_hair_tips[this.front_hair_tips.length-1].y),this.drawCurve2(this.front_hair_tips[this.front_hair_tips.length-1],this.top_of_head,this.front_hair_cp2[this.front_hair_tips.length-1],this.front_hair_cp1[this.front_hair_tips.length-1]));this.con.restore(),this._config("#000","#000",.4),this.con.fill(),this._config(this.hair_color,"#000"),this.con.beginPath(),this.con.moveTo(this.top_of_head.x,this.top_of_head.y);for(let i=0;i<t;i++)this.drawCurve2(this.top_of_head,this.front_hair_tips[i],this.front_hair_cp1[i],this.front_hair_cp2[i]),i+1<t?(this.con.lineTo(this.front_hair_tips[i+1].x-10,this.front_hair_tips[i+1].y),this.drawCurve2(this.front_hair_tips[i+1],this.top_of_head,this.front_hair_cp2[i+1],this.front_hair_cp1[i+1])):(this.con.lineTo(this.front_hair_tips[this.front_hair_tips.length-1].x-10,this.front_hair_tips[this.front_hair_tips.length-1].y),this.drawCurve2(this.front_hair_tips[this.front_hair_tips.length-1],this.top_of_head,this.front_hair_cp2[this.front_hair_tips.length-1],this.front_hair_cp1[this.front_hair_tips.length-1])),this.con.stroke();this.con.fill()}this.con.globalAlpha=1}generateSideburnsCoordinateRight(t){return Math.floor(t*(this.forehead_right.y-this.cheek_end[0].y)/(this.forehead_right.x-this.cheek_end[0].x))}generateSideburnsCoordinateLeft(t){return Math.floor(t*(this.forehead_left.y-this.cheek_end[1].y)/(this.forehead_left.x-this.cheek_end[1].x))}drawSkinHead(){this._config(this.hair_color,this.hair_color,1,1),this.con.beginPath(),this.drawCurve2(this.temple_right,this.temple_left,this.head_cp1,this.head_cp2,!0),this.lineTo(this.forehead_left),this.drawCurve(this.forehead_left,this.forehead_right,this.top_of_head),this.lineTo(this.temple_right),this.con.fill()}drawWhiteEyes(){for(let t=0;t<2;t++)this._config("#fff","#000"),this.con.beginPath(),this.drawCurve2(this.eye_end[t],this.eye_head[t],this.lower_eyeline_cp2[t],this.upper_eyeline_cp1[t],!0),this.drawCurve(this.eye_head[t],this.eyelid_bottom[t],this.eyelid_bottom_cp1[t]),this.drawCurve(this.eyelid_bottom[t],this.eye_end[t],this.eyelid_bottom_cp3[t]),this.con.fill()}drawLowerEyelid(){this._config(this.skin_color,"#ff0"),this.con.beginPath(),this.moveTo(this.upper_eyeline_end[1]),this.lineTo(this.eye_end[1]),this.drawCurve(this.eye_end[1],this.eyelid_bottom[1],this.eyelid_bottom_cp3[1]),this.drawCurve(this.eyelid_bottom[1],this.eye_head[1],this.eyelid_bottom_cp1[1]),this.lineTo(this.eye_head[0]),this.drawCurve(this.eye_head[0],this.eyelid_bottom[0],this.eyelid_bottom_cp1[0]),this.drawCurve(this.eyelid_bottom[0],this.eye_end[0],this.eyelid_bottom_cp3[0]),this.lineTo(this.upper_eyeline_end[0]),this.lineTo(this.temple_right),this.drawCurve2(this.temple_right,this.chin_end,this.cheek_cp2[0],this.cheek_cp1[0]),this.drawCurve2(this.chin_end,this.chin_start,this.chin_cp2,this.chin_cp1),this.drawCurve2(this.chin_start,this.temple_left,this.cheek_cp1[1],this.cheek_cp2[1]),this.lineTo(this.upper_eyeline_end[1]),this.con.fill()}drawEyelashes(t=3){Math.floor(Math.abs(this.eyelash_end[0].x-this.eye_head[0].x)/10),Math.floor(Math.abs(this.eyelash_end[0].x-this.eyelash_cp[0].x));for(let t=0;t<2;t++)this._config(this.hair_color,"#f00"),this.con.beginPath(),this.drawCurve2(this.eyelash_start[t],this.eyelash_end[t],this.eyelash_cp1[t],this.eyelash_cp2[t],!0),this.drawCurve(this.eyelash_end[t],this.upper_eyeline_end2[t],this.eyelash_cp[t]),this.con.closePath(),this.con.fill()}drawEyeblow(){for(let t=0;t<2;t++)this._config(this.hair_color,"#555"),this.con.beginPath(),this.drawCurve2(this.eyeblow_start[t],this.eyeblow_end[t],this.eyeblow_upper_cp1[t],this.eyeblow_upper_cp2[t],!0),this.drawCurve2(this.eyeblow_end[t],this.eyeblow_start[t],this.eyeblow_lower_cp2[t],this.eyeblow_lower_cp1[t]),this.con.fill(),this.con.stroke()}drawEyeline2(){for(let t=0;t<2;t++)this._config("#888","#888"),this.con.beginPath(),this.drawCurve2(this.upper_eyeline_start2[t],this.upper_eyeline_end2[t],this.eyeline2_cp1[t],this.eyeline2_cp2[t],!0),this.drawCurve2(this.upper_eyeline_end2[t],this.upper_eyeline_start2[t],this.eyeline2_cp4[t],this.eyeline2_cp3[t],!1),this.con.stroke(),this.con.fill()}drawEyelid(){this._config(this.skin_color,"#000"),this.con.beginPath(),this.drawCurve2(this.upper_eyeline_end[1],this.eye_head[1],this.upper_eyeline_cp2[1],this.upper_eyeline_cp1[1],!0),this.lineTo(this.eye_head[0]),this.drawCurve2(this.eye_head[0],this.upper_eyeline_end[0],this.upper_eyeline_cp1[0],this.upper_eyeline_cp2[0]),this.lineTo(this.temple_right),this.drawCurve2(this.cheek_end[0],this.cheek_end[1],this.head_cp1,this.head_cp2),this.lineTo(this.upper_eyeline_end[1]),this.con.fill()}drawEyes(){this._drawIris(),this._drawEyeline()}_drawIris(){let t,i=rand(-1,1),e=this.coordinates.eye.scale;for(let s=0;s<2;s++)t=0===s?1:-1,this._config(this.iris_color,"#000",.9,4),this.con.save(),this.con.translate(0,-(this.center.y*e-this.center.y)),this.con.scale(1,e),this.con.beginPath(),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+this.coordinates.eye.move.x,this.center.y+this.coordinates.eye.position.y+this.coordinates.eye.move.y,this.coordinates.eye.size,2*Math.PI,!1),this.con.restore(),this.con.fill(),this.con.stroke(),this.con.save(),this.con.translate(0,-(this.center.y*e-this.center.y)),this.con.scale(1,e),this.con.beginPath(),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+this.coordinates.eye.move.x,this.center.y+this.coordinates.eye.position.y+this.coordinates.eye.move.y,10+(this.coordinates.eye.pupil.size>this.coordinates.eye.size?this.coordinates.eye.size:this.coordinates.eye.pupil.size),2*Math.PI,!1),this.con.restore(),this._config("#fff","#fff",.2),this._setBlur("#fff",0,0,10),this.con.fill(),this._resetBlur(),this.con.save(),this.con.translate(0,-(this.center.y*e-this.center.y)),this.con.scale(1,e),this.con.beginPath(),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+this.coordinates.eye.move.x,this.center.y+this.coordinates.eye.position.y+14+this.coordinates.eye.move.y,20,2*Math.PI,!1),this.con.restore(),this._config("#fff","#fff",.4),this._setBlur("#fff",0,0,10),this.con.fill(),this._resetBlur(),this._config(this.pupil_color,"#000",1),this.con.save(),this.con.translate(0,-(this.center.y*e-this.center.y)),this.con.scale(1,e),this.con.beginPath(),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+1.5*this.coordinates.eye.move.x,this.center.y+this.coordinates.eye.position.y+this.coordinates.eye.move.y,7+(this.coordinates.eye.pupil.size>this.coordinates.eye.size?this.coordinates.eye.size:this.coordinates.eye.pupil.size),2*Math.PI,!1),this.con.restore(),this.con.fill(),this._config("#fff","#fff"),this.con.save(),this.con.translate(0,-(1.5*this.center.y-this.center.y)),this.con.scale(1,1.5),this.con.beginPath(),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+1.5*this.coordinates.eye.move.x+10+i,this.center.y-10,5,2*Math.PI,!1),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+1.5*this.coordinates.eye.move.x+2+i,this.center.y-5,2,2*Math.PI,!1),this.con.restore(),this.con.fill(),this._config("#fff","#fff",1),this.con.save(),this.con.translate(0,-(1.5*this.center.y-this.center.y)),this.con.scale(1,1.5),this.con.beginPath(),this.con.arc(this.eye_head[s].x+this.coordinates.eye.position.x*t+1.5*this.coordinates.eye.move.x-24+i,this.center.y-2,6,2*Math.PI,!1),this.con.restore(),this._setBlur("#fff",0,0,10),this.con.fill(),this.con.globalAlpha=1,this._resetBlur()}_drawEyeline(){this.drawEyeShadow();for(let t=0;t<2;t++)this._config("#000","#000"),this.con.beginPath(),this.drawCurve2(this.eye_head[t],this.upper_eyeline_end[t],this.upper_eyeline_cp1[t],this.upper_eyeline_cp2[t],!0),this.con.lineTo(this.eye_end[t].x,this.eye_end[t].y),this.drawCurve2(this.eye_end[t],this.eye_head[t],this.lower_eyeline_cp2[t],this.lower_eyeline_cp1[t]),this.con.stroke(),this.con.fill()}drawEyeShadow(){for(let t=0;t<2;t++)this.con.beginPath(),this.drawCurve2(this.eye_head[t],this.upper_eyeline_end[t],this.upper_eyeline_cp1[t],this.upper_eyeline_cp2[t],!0),this.con.lineTo(this.eye_shadow_end[t].x,this.eye_shadow_end[t].y),this.drawCurve2(this.eye_shadow_end[t],this.eye_shadow_start[t],this.eye_shadow_cp2[t],this.eye_shadow_cp1[t]),this._config("#000","#f00",.3),this.con.fill(),this.con.globalAlpha=1}drawOutsideBackHair(t,i){let e=Math.abs(this.temple_left.x-this.outside_back_hair_left.x)/t;for(let s=0;s<1;s++){this._initOutsideBackHairArrays();for(let s=0;s<=t;s++)this.outside_back_hair_roots[s]={x:this.outside_back_hair_left.x+s*e,y:this.outside_back_hair_left.y},this.outside_back_hair_tips[s]={x:this.outside_back_hair_left.x+s*e+rand(-20,0),y:this.outside_back_hair_left.y+rand(0,20)+i},this.outside_back_hair_cp1[s]={x:this.outside_back_hair_left.x+s*e/2+rand(-5,5),y:this.outside_back_hair_roots[s].y+this.sp(this.outside_back_hair_roots[s].y,this.outside_back_hair_tips[s].y,1/3)},this.outside_back_hair_cp2[s]={x:this.outside_back_hair_left.x+s*e/2+rand(-1,1),y:this.outside_back_hair_roots[s].y+this.sp(this.outside_back_hair_roots[s].y,this.outside_back_hair_tips[s].y,2/3)};this._config(this.hair_color,"#000"),this.con.beginPath(),this.moveTo(this.outside_back_hair_roots[0]);for(let i=0;i<t;i++)this.drawCurve2(this.outside_back_hair_roots[i],this.outside_back_hair_tips[i],this.outside_back_hair_cp1[i],this.outside_back_hair_cp2[i]),i+1<t?this.drawCurve2(this.outside_back_hair_tips[i+1],this.outside_back_hair_roots[i+1],this.outside_back_hair_cp2[i],this.outside_back_hair_cp1[i+1]):this.drawCurve2(this.outside_back_hair_tips[this.outside_back_hair_tips.length-1],this.temple_left,this.outside_back_hair_cp2[this.outside_back_hair_tips.length-1],this.outside_back_hair_cp1[this.outside_back_hair_tips.length-1]);this._initOutsideBackHairArrays();for(let s=0;s<=t;s++)this.outside_back_hair_roots[s]={x:this.temple_right.x+s*e,y:this.temple_right.y},this.outside_back_hair_tips[s]={x:this.temple_right.x+s*e+rand(-20,0),y:this.temple_right.y+rand(10,20)+i},this.outside_back_hair_cp1[s]={x:this.temple_right.x+s*e/2+rand(0,10),y:this.outside_back_hair_roots[s].y+this.sp(this.outside_back_hair_roots[s].y,this.outside_back_hair_tips[s].y,1/3)},this.outside_back_hair_cp2[s]={x:this.temple_right.x+s*e/2+rand(-10,10),y:this.outside_back_hair_roots[s].y+this.sp(this.outside_back_hair_roots[s].y,this.outside_back_hair_tips[s].y,2/3)};this.lineTo(this.outside_back_hair_roots[0]);for(let i=0;i<t;i++)this.drawCurve2(this.outside_back_hair_roots[i],this.outside_back_hair_tips[i],this.outside_back_hair_cp1[i],this.outside_back_hair_cp2[i]),i+1<t?this.drawCurve2(this.outside_back_hair_tips[i+1],this.outside_back_hair_roots[i+1],this.outside_back_hair_cp2[i],this.outside_back_hair_cp1[i+1]):this.drawCurve2(this.outside_back_hair_tips[this.outside_back_hair_tips.length-1],this.outside_back_hair_right,this.outside_back_hair_cp2[this.outside_back_hair_tips.length-1],this.outside_back_hair_cp1[this.outside_back_hair_tips.length-1]);this.drawCurve2(this.outside_back_hair_right,this.outside_back_hair_left,this.outside_back_head_cp1,this.outside_back_head_cp2),this._config(this.hair_color,"#000"),this.con.stroke(),this.con.fill()}}drawBackHair(t,i){this._initBackHairArrays();let e=(this.temple_right.x-this.temple_left.x)/t;for(let s=0;s<=2;s++){let s=0;for(let h=0;h<=t;h++){let r=rand(-6,6);h<t/2?s+=5:h===Math.floor(t/2)||(s-=5),0===h?(this.back_hair_roots[h]={x:this.temple_left.x+h*e,y:this.temple_left.y},this.back_hair_tips[h]={x:this.temple_left.x+h*e+rand(-60,1),y:this.top_of_head.y+i+s}):h===t?(this.back_hair_roots[h]={x:this.temple_left.x,y:this.temple_left.y},this.back_hair_tips[h]={x:this.temple_right.x+rand(-60,2),y:this.top_of_head.y+i+s}):(this.back_hair_roots[h]={x:this.temple_left.x+h*e,y:this.temple_left.y+rand(-10,20)},this.back_hair_tips[h]={x:this.temple_left.x+h*e+rand(-10,10),y:this.top_of_head.y+i+s}),this.back_hair_cp1[h]={x:this.temple_left.x+h*e+r,y:this.back_hair_roots[h].y+this.sp(this.back_hair_roots[h].y,this.back_hair_tips[h].y,.25)},this.back_hair_cp2[h]={x:this.temple_left.x+h*e+r,y:this.back_hair_roots[h].y+this.sp(this.back_hair_roots[h].y,this.back_hair_tips[h].y,.5)}}this._config(this.hair_color,this.hair_stroke_color,.4),this.con.beginPath(),this.moveTo(this.back_hair_roots[0]);for(let i=0;i<t;i++)this.drawCurve2(this.back_hair_roots[i],this.back_hair_tips[i],this.back_hair_cp1[i],this.back_hair_cp2[i]),i+1<t?(this.con.lineTo(this.back_hair_tips[i+1].x-10,this.back_hair_tips[i+1].y),this.drawCurve2(this.back_hair_tips[i+1],this.back_hair_roots[i+1],this.back_hair_cp2[i+1],this.back_hair_cp1[i+1])):(this.con.lineTo(this.back_hair_tips[this.back_hair_tips.length-1].x+10,this.back_hair_tips[this.back_hair_tips.length-1].y),this.drawCurve2(this.back_hair_tips[this.back_hair_tips.length-1],this.temple_right,this.back_hair_cp2[this.back_hair_tips.length-1],this.back_hair_cp1[this.back_hair_tips.length-1])),this.con.stroke();this.con.fill(),this.con.fillStyle="#000",this.con.fill()}this.con.globalAlpha=1}drawBackHair2(t,i){this._initBackHairArrays();let e=(this.temple_right.x-this.temple_left.x)/t;for(let s=0;s<=2;s++){let s=0;for(let h=0;h<=t;h++){let r=rand(-6,6);h<t/2?s+=5:h===Math.floor(t/2)||(s-=5),0===h?(this.back_hair_roots[h]={x:this.temple_left.x+h*e,y:this.temple_left.y},this.back_hair_tips[h]={x:this.temple_left.x+h*e+e/2+rand(-60,1),y:this.top_of_head.y+i+s}):h===t?(this.back_hair_roots[h]={x:this.temple_left.x,y:this.temple_left.y},this.back_hair_tips[h]={x:this.temple_right.x+e/2+rand(-60,2),y:this.top_of_head.y+i+s}):(this.back_hair_roots[h]={x:this.temple_left.x+h*e,y:this.temple_left.y+rand(-10,20)},this.back_hair_tips[h]={x:this.temple_left.x+h*e+e/2+rand(-60,10),y:this.top_of_head.y+i+s}),this.back_hair_cp1[h]={x:this.temple_left.x+h*e+r,y:this.back_hair_roots[h].y+this.sp(this.back_hair_roots[h].y,this.back_hair_tips[h].y,.25)},this.back_hair_cp2[h]={x:this.temple_left.x+h*e+r,y:this.back_hair_roots[h].y+this.sp(this.back_hair_roots[h].y,this.back_hair_tips[h].y,.5)}}this._config(this.hair_color,"#000",.4),this.con.beginPath(),this.moveTo(this.back_hair_roots[0]);for(let i=0;i<t;i++)this.drawCurve2(this.back_hair_roots[i],this.back_hair_tips[i],this.back_hair_cp1[i],this.back_hair_cp2[i]),i+1<t?this.drawCurve2(this.back_hair_tips[i+1],this.back_hair_roots[i+1],this.back_hair_cp2[i+1],this.back_hair_cp1[i+1]):this.drawCurve2(this.back_hair_tips[this.back_hair_tips.length-1],this.temple_right,this.back_hair_cp2[this.back_hair_tips.length-1],this.back_hair_cp1[this.back_hair_tips.length-1]),this.con.stroke();this.con.fill(),this.con.fillStyle="#000",this.con.fill()}this.con.globalAlpha=1}drawNeck(){this._config(this.skin_color,"#000"),this.con.beginPath(),this.drawCurve2(this.neck_start[0],this.neck_end[0],this.neck_cp1[0],this.neck_cp2[0],!0),this.lineTo(this.neck_end[1]),this.drawCurve2(this.neck_end[1],this.neck_start[1],this.neck_cp2[1],this.neck_cp1[1]),this.con.fill(),this._config("#000","#000",.1,1),this.con.fill(),this.con.globalAlpha=1,this.con.stroke()}drawNeckShadow(){this._config("#000","#000",1,1),this.con.beginPath(),this.moveTo(this.neck_start[0]),this.lineTo(this.neck_start2[0]),this.drawCurve2(this.neck_start2[0],this.neck_start2[1],this.neck_shadow_cp1,this.neck_shadow_cp2),this.lineTo(this.neck_start[1]),this.con.globalAlpha=.2,this.con.fill(),this.con.globalAlpha=1}drawEar(){for(let t=0;t<2;t++)this._config(this.skin_color,"#000"),this.con.beginPath(),this.drawCurve2(this.ear_start[t],this.earlobe_start[t],this.ear_cp1[t],this.ear_cp2[t],!0),this.drawCurve(this.earlobe_start[t],this.ear_end[t],this.earlobe_cp1[t]),this.con.stroke(),this.con.fill(),this.con.globalAlpha=.2,this.con.beginPath(),this.drawCurve2(this.inner_ear_start[t],this.inner_ear_end[t],this.inner_ear_cp1[t],this.inner_ear_cp2[t],!0),this.con.stroke(),this.con.fillStyle="#000",this.con.beginPath(),this.drawCurve2(this.inner_ear_start[t],this.inner_ear_end[t],this.inner_ear_cp1[t],this.inner_ear_cp2[t],!0),this.lineTo(this.ear_end[t]),this.con.fill(),this.con.globalAlpha=1}drawOutline(){this._config(this.skin_color,"#000",1,3),this.con.beginPath(),this.drawCurve2(this.chin_start,this.chin_end,this.chin_cp1,this.chin_cp2,!0),this.drawCurve2(this.chin_end,this.temple_right,this.cheek_cp1[0],this.cheek_cp2[0],!1),this.drawCurve2(this.temple_right,this.temple_left,this.head_cp1,this.head_cp2),this.drawCurve2(this.temple_left,this.chin_start,this.cheek_cp2[1],this.cheek_cp1[1],!1),this.con.stroke(),this.con.fill()}drawNose(){if(this.coordinates.nose.flag&&(this._config("#000","#222",.8),this.con.beginPath(),this.moveTo(this.nose_top),this.lineTo(this.nose_bottom),this.drawCurve2(this.nose_bottom,this.nose_top,this.nose_cp1,this.nose_cp2),this.con.stroke(),this._config("#000","#000",.3),this.con.fill(),this.con.globalAlpha=1),this.coordinates.nose2.flag)for(let t=0;t<2;t++)this._config("#000","#000",1),this.con.beginPath(),this.drawCurve(this.nose2_start[t],this.nose2_end[t],this.nose2_cp[t],!0),this.con.stroke(),this.con.fill(),this.con.globalAlpha=1}drawMouth(){this._config("#ef857d","#000",1,1),this.con.beginPath(),this.drawUpperLipLine(),this.drawLowerLipLine(),this.con.fill(),this.con.stroke(),this._config("#000","#000",.2,1),this.con.fill()}drawUpperLipLine(){this.drawCurve2(this.mouth_start,this.mouth_end,this.upper_lip_cp1,this.upper_lip_cp2,!0)}drawLowerLipLine(){this.drawCurve2(this.mouth_end,this.mouth_start,this.lower_lip_cp2,this.lower_lip_cp1)}drawLowerLip(){this._config(this.skin_color,"#000",1,1),this.con.beginPath(),this.moveTo(this.mouth_end),this.drawLowerLipLine(),this.lineTo(this.chin_start),this.drawCurve2(this.chin_start,this.chin_end,this.chin_cp1,this.chin_cp2),this.lineTo(this.mouth_end),this.con.fill(),this.fillR(this.chin_end,"green"),this.fillR(this.chin_start,"orange"),this.fillR(this.mouth_end,"orange"),this.fillR(this.mouth_start,"#000")}drawDebug(){this._config("#111","#111"),this.con.font="16px ''",this.con.fillText("(X: "+ox+",  Y: "+oy+")",50,50),this.con.fillText("(X: "+(ox-this.center.x)+",  Y: "+(oy-this.center.y)+")",50,100)}drawCenter(){this._config("#f00","#f00"),this.con.beginPath(),this.con.moveTo(-10+this.center.x,this.center.y),this.con.lineTo(10+this.center.x,this.center.y),this.con.stroke(),this.con.beginPath(),this.con.moveTo(this.center.x,-10+this.center.y),this.con.lineTo(this.center.x,10+this.center.y),this.con.stroke()}}
