function onInput(e){let t=e.split("."),a=document.getElementById(e);a.oninput=(e=>{switch(t.length){case 1:face.coordinates[t[0]]=Number(a.value);break;case 2:face.coordinates[t[0]][t[1]]=Number(a.value);break;case 3:face.coordinates[t[0]][t[1]][t[2]]=Number(a.value);break;case 4:face.coordinates[t[0]][t[1]][t[2]][t[3]]=Number(a.value);break;case 5:face.coordinates[t[0]][t[1]][t[2]][t[3]][t[4]]=Number(a.value);break;case 6:face.coordinates[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=Number(a.value)}})}function toggleShow(e){let t=e.split("."),a=document.getElementById(e);a.onchange=(e=>{switch(t.length){case 1:face.coordinates[t[0]]=a.checked;break;case 2:face.coordinates[t[0]][t[1]]=a.checked;break;case 3:face.coordinates[t[0]][t[1]][t[2]]=a.checked;break;case 4:face.coordinates[t[0]][t[1]][t[2]][t[3]]=a.checked}})}let front_hair_types=document.getElementsByName("front_hair_type");for(let e=0;e<front_hair_types.length;e++)front_hair_types[e].onclick=(()=>{face.coordinates.hair.front.type=Number(front_hair_types[e].value)});let side_hair_types=document.getElementsByName("side_hair_type");for(let e=0;e<side_hair_types.length;e++)side_hair_types[e].onclick=(()=>{face.coordinates.hair.side.type=Number(side_hair_types[e].value)});let back_hair_types=document.getElementsByName("back_hair_type");for(let e=0;e<back_hair_types.length;e++)back_hair_types[e].onclick=(()=>{face.coordinates.hair.back.type=Number(back_hair_types[e].value)});let face=new DrawFace("can",coordinates),sliders=document.getElementsByClassName("slider");for(let e=0;e<sliders.length;e++)onInput(sliders[e].id);let shows=document.getElementsByName("show");for(let e=0;e<shows.length;e++)toggleShow(shows[e].id);function mainLoop(){face.update(),face.draw()}function getKeys(e,t="parent"){let a=t,n=Object.keys(e);if(0===n.length)return 0;n.forEach(function(t,n){let c=a+"."+t;"number"==typeof e[t]&&(str_arr=c.split("."),_unionObj(face,str_arr,e[t])),getKeys(e[t],c)})}function _unionObj(e,t,a){switch(t.length){case 1:e[t[0]]=a;break;case 2:e[t[0]][t[1]]=a;break;case 3:e[t[0]][t[1]][t[2]]=a;break;case 4:e[t[0]][t[1]][t[2]][t[3]]=a;break;case 5:e[t[0]][t[1]][t[2]][t[3]][t[4]]=a;break;case 6:e[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=a}}function saveCanvas(e){$(document).on("click","#save_chara_btn",function(){const t=new Date,a=t.getFullYear()+("00"+(t.getMonth()+1)).slice(-2)+("00"+t.getDate()).slice(-2);let n=document.getElementById(e),c=document.createElement("a");c.href=n.toDataURL(),c.download="canchara"+a+".png",c.click()})}window.onload=(()=>{setInterval(mainLoop,200)}),saveCanvas("can"),window.twttr=function(e,t,a){var n,c=e.getElementsByTagName(t)[0],r=window.twttr||{};return e.getElementById(a)?r:((n=e.createElement(t)).id=a,n.src="https://platform.twitter.com/widgets.js",c.parentNode.insertBefore(n,c),r._e=[],r.ready=function(e){r._e.push(e)},r)}(document,"script","twitter-wjs");
